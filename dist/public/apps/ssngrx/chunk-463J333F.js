import{a as L,c as Qe,d as U}from"./chunk-KLACDKLO.js";import{b as K,d as v,e as ee,f as te,h as re,j as N,k as ie,l as ne,m as $e,n as oe,o as ae,p as se,q as le,r as me,s as ce,t as de,u as ge,v as fe,x as We,y as Ke,z as et}from"./chunk-ASMZDNPB.js";import{G as he,H as be,I as ve,a as pe,b as ue}from"./chunk-O3XRCEAU.js";import{W as Ye,ha as B,ia as _e,ja as D,ka as Ze,la as Je,na as H}from"./chunk-KDN2CY5X.js";import"./chunk-CARY4E7O.js";import{$b as Xe,Cb as o,Db as a,Eb as w,F as z,Fa as Ae,Ga as Le,Gc as Ge,H as P,Ia as y,Ib as _,Ic as O,Lb as u,Nb as c,Nc as ze,Oa as Ue,Pc as A,Qb as qe,Sb as C,Tb as S,Ub as x,Vb as k,Wb as l,Xb as R,Yb as E,Zb as je,_b as T,a as Me,aa as Se,ab as s,b as Pe,bb as g,cc as W,da as ke,dc as Z,e as F,ea as Te,ga as Ve,ia as Fe,nb as Ne,nc as J,o as M,oa as I,pa as Oe,q as Ie,qb as f,rc as Re,sb as V,tb as m,u as Y,ub as xe,vb as Be,wb as De,xa as d,ya as p,yb as He}from"./chunk-DZTCXJT3.js";function st(t,i){t&1&&w(0,"div",2)}var lt=new Ve("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var q=(()=>{class t{constructor(e,r,n,b,h){this._elementRef=e,this._ngZone=r,this._changeDetectorRef=n,this._animationMode=b,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new Ae,this._mode="determinate",this._transitionendHandler=Ce=>{this.animationEnd.observers.length===0||!Ce.target||!Ce.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=b==="NoopAnimations",h&&(h.color&&(this.color=this._defaultColor=h.color),this.mode=h.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(e){this._color=e}get value(){return this._value}set value(e){this._value=tt(e||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=tt(e||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}static{this.\u0275fac=function(r){return new(r||t)(g(y),g(Le),g(J),g(Ue,8),g(lt,8))}}static{this.\u0275cmp=I({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(r,n){r&2&&(V("aria-valuenow",n._isIndeterminate()?null:n.value)("mode",n.mode),De("mat-"+n.color),Be("_mat-animation-noopable",n._isNoopAnimation)("mdc-linear-progress--animation-ready",!n._isNoopAnimation)("mdc-linear-progress--indeterminate",n._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",Re],bufferValue:[2,"bufferValue","bufferValue",Re],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[Ne,T],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(r,n){r&1&&(o(0,"div",0),w(1,"div",1),f(2,st,1,0,"div",2),a(),o(3,"div",3),w(4,"span",4),a(),o(5,"div",5),w(6,"span",4),a()),r&2&&(s(),xe("flex-basis",n._getBufferBarFlexBasis()),s(),He(n.mode==="buffer"?2:-1),s(),xe("transform",n._getPrimaryBarTransform()))},styles:[`@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half))}100%{transform:translateX(var(--mdc-linear-progress-primary-full))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color)}.mdc-linear-progress__buffer-dots{background-color:var(--mdc-linear-progress-track-color)}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-color:rgba(0,0,0,0);background-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='rgba(244, 67, 54, 0.25)'/%3E%3C/svg%3E")}}.mdc-linear-progress__buffer-bar{background-color:var(--mdc-linear-progress-track-color)}.mdc-linear-progress{height:max(var(--mdc-linear-progress-track-height), var(--mdc-linear-progress-active-indicator-height))}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress{height:4px}}.mdc-linear-progress__bar{height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{height:var(--mdc-linear-progress-track-height)}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height)}}.mdc-linear-progress__buffer{border-radius:var(--mdc-linear-progress-track-shape)}.mat-mdc-progress-bar{display:block;text-align:start;--mdc-linear-progress-primary-half: 83.67142%;--mdc-linear-progress-primary-full: 200.611057%;--mdc-linear-progress-secondary-quarter: 37.651913%;--mdc-linear-progress-secondary-half: 84.386165%;--mdc-linear-progress-secondary-full: 160.277782%;--mdc-linear-progress-primary-half-neg: -83.67142%;--mdc-linear-progress-primary-full-neg: -200.611057%;--mdc-linear-progress-secondary-quarter-neg: -37.651913%;--mdc-linear-progress-secondary-half-neg: -84.386165%;--mdc-linear-progress-secondary-full-neg: -160.277782%}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}`],encapsulation:2,changeDetection:0})}}return t})();function tt(t,i=0,e=100){return Math.max(i,Math.min(e,t))}var j=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Oe({type:t})}static{this.\u0275inj=Te({imports:[Ye]})}}return t})();var X={minLength:{reg:/^.{1,150}$/,hint:"minimum length"},hasNumber:{reg:/\d/,hint:"one number"},hasUpper:{reg:/[A-Z]/,hint:"one uppercase symbol"},hasLower:{reg:/[a-z]/,hint:"one lowcase symbol"},hasSpecial:{reg:/[$@$!%*?&]/,hint:"one special symbol ($@$!%*?&)"}},G=class t{constructor(i){this.userMongoServiceService=i}validateUserId(){return i=>this.userMongoServiceService.checkUser(i.getRawValue()).pipe(Y(e=>e?{userIdTaken:e}:null))}validateEmail(i=""){return e=>i===e.getRawValue()||e.getRawValue()==""?Ie(null):this.userMongoServiceService.checkEmail(e.getRawValue(),i).pipe(Y(r=>r?{emailTaken:r}:null))}validateEmailExist(i=""){return e=>this.userMongoServiceService.checkEmail(e.getRawValue(),i).pipe(Y(r=>r?null:{emailNotExists:!r}))}strongPasswordValidation(i=1,e){return X.minLength.reg=new RegExp(String.raw`^.{${i},150}$`),X.minLength.hint=`${X.minLength.hint} is ${i} symbols`,r=>{let n="Password must contain at least:",b=!0;return e.forEach(h=>{b=b&&X[h].reg.test(r.value),n=n+`
`+X[h].hint+(X[h].reg.test(r.value)?" - \u2705":" - \u26D4")}),Object.assign(r,{hint_strongPasswordValidation:n}),b?null:{strong:!0,hint_strong:n}}}static \u0275fac=function(e){return new(e||t)(Fe(he))};static \u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"})};var _t=["passwordHTML"],ht=["emailHTML"],bt=["emailHTMLResend"],vt=["buttomSubmit"],wt=["buttonResend"],yt=()=>[];function Ct(t,i){if(t&1&&(o(0,"div",24)(1,"label"),l(2),a(),w(3,"mat-progress-bar",25),a()),t&2){let e=c();s(2),R(e.processState)}}function St(t,i){if(t&1){let e=_();o(0,"button",26),u("click",function(){d(e);let n=c();return p(n.userId==null?null:n.userId.setValue(null))}),o(1,"mat-icon",27),l(2,"close"),a()()}}function xt(t,i){t&1&&(o(0,"mat-error"),l(1," UserName isn't unique "),a())}function Rt(t,i){t&1&&(o(0,"mat-error"),l(1," Minimum length is 4 characters "),a())}function Et(t,i){t&1&&(o(0,"mat-error"),l(1," The field is required "),a())}function Mt(t,i){if(t&1){let e=_();o(0,"button",26),u("click",function(){d(e);let n=c();return p(n.passwordCreate.patchValue(null))}),o(1,"mat-icon"),l(2,"close"),a()()}}function Pt(t,i){t&1&&(o(0,"mat-error"),l(1," The field is required "),a())}function It(t,i){if(t&1){let e=_();o(0,"mat-error",28),l(1," Not safe. Check requirements "),o(2,"mat-icon",29),u("click",function(){d(e);let n=c();return p(n.showPasswordTip())}),l(3,"more"),a()()}}function kt(t,i){t&1&&(o(0,"a",30),l(1,"Restore password"),a())}function Tt(t,i){if(t&1){let e=_();o(0,"button",26),u("click",function(){d(e);let n=c(2);return p(n.email.patchValue(null))}),o(1,"mat-icon"),l(2,"close"),a()()}}function Vt(t,i){t&1&&(o(0,"mat-error"),l(1," The field is required "),a())}function Ft(t,i){t&1&&(o(0,"mat-error"),l(1," Incorrect email "),a())}function Ot(t,i){t&1&&(o(0,"mat-error"),l(1," This email is being used "),a())}function At(t,i){if(t&1){let e=_();o(0,"mat-form-field")(1,"mat-label"),l(2,"Email"),a(),o(3,"input",31,3),u("keyup.enter",function(){d(e);let n=c();return p(n.goToSubmitButton())}),a(),f(5,Tt,3,0,"button",15)(6,Vt,2,0,"mat-error",16)(7,Ft,2,0,"mat-error",16)(8,Ot,2,0,"mat-error",16),a()}if(t&2){let e=c();s(5),m("ngIf",e.email.value),s(),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.required),s(),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.email),s(),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.emailTaken)}}function Lt(t,i){if(t&1&&(o(0,"p"),l(1),w(2,"br"),a()),t&2){let e=c(3);s(),E(" ",e.signUpResult.userSigned===!1?"User has not been signed up":`Error - Email confimation letter has not been sent.
 User has been signed up`," ")}}function Ut(t,i){if(t&1&&(o(0,"label",35),f(1,Lt,3,1,"p",16),l(2),a()),t&2){let e=c(2);s(),m("ngIf",e.signUpResult.userSigned!==void 0),s(),E(" Details: ",e.signUpResult.msg," ")}}function Nt(t,i){if(t&1){let e=_();o(0,"button",36),u("click",function(){d(e);let n=c(2);return p(n.signUpResult.type="null")}),l(1,"Okay"),a()}}function Bt(t,i){if(t&1&&(o(0,"section",32),f(1,Ut,3,2,"label",33)(2,Nt,2,0,"button",34),a()),t&2){let e=c();s(),m("ngIf",e.signUpResult.type==="error"),s(),m("ngIf",e.signUpResult.type==="error")}}function Dt(t,i){t&1&&(o(0,"mat-error"),l(1," The field is required "),a())}function Ht(t,i){t&1&&(o(0,"mat-error"),l(1," Incorrect email "),a())}function qt(t,i){t&1&&(o(0,"mat-error"),l(1," This email is being used "),a())}function jt(t,i){if(t&1){let e=_();o(0,"section",37)(1,"form",38,0)(3,"mat-form-field")(4,"mat-label"),l(5,"Email"),a(),o(6,"input",31,4),u("keyup.enter",function(){d(e);let n=c();return p(n.goToResendButton())}),a(),f(8,Dt,2,0,"mat-error",16)(9,Ht,2,0,"mat-error",16)(10,qt,2,0,"mat-error",16),a(),o(11,"button",39,5),u("click",function(){d(e);let n=c();return p(n.resendEmail())}),l(13,"Resend confirmation "),a()()()}if(t&2){let e=c();s(),m("formGroup",e.registerForm),s(7),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.required),s(),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.email),s(),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.emailTaken),s(),m("disabled",e.email.invalid||e.registerForm.disabled)}}var Q=class t{constructor(i,e,r,n,b,h,Ce){this.fb=i;this.router=e;this.route=r;this.authService=n;this.authValidatorService=b;this.snacksService=h;this.changeDetector=Ce;this.registerForm=this.fb.group({userId:["",{validators:[v.required],updateOn:"blur"}],password:["",{validators:[v.required],updateOn:"blur"}],email:["",{updateOn:"blur"}],role:"user"}),this.userIdValidator=this.authValidatorService.validateUserId(),this.emailValidator=this.authValidatorService.validateEmail(),this.passwordStrongValidator=this.authValidatorService.strongPasswordValidation(H.PASSWORD_SETTINGS.MINLENGTH,H.PASSWORD_SETTINGS.REQUIREMENTS)}passwordHTML;emailHTML;emailHTMLResend;buttomSubmitHTML;buttomResendHTML;subscriptions=new F;registerForm;formProcess="logIn";processState=null;signUpResult={type:"null",msg:"",userSigned:!1};emailErrUserData=null;hide=!0;userIdValidator;emailValidator;passwordStrongValidator;msgSentEmail=`Email has been sent to confirm your email address.
 Please active your account by using a link in the message sent to you`;ngOnInit(){this.route.snapshot.params?.logout&&this.subscriptions.add(this.authService.logOutUser().subscribe(()=>{this.snacksService.openSnack("You have been logged out","Okay","success-snackBar"),this.router.navigate(["register"])})),this.subscriptions.add(this.registerForm.statusChanges.pipe(z(i=>i==="VALID")).subscribe(i=>{this.emailErrUserData?this.goToResendButton():this.goToSubmitButton()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}setSignUpFormProcess(){this.formProcess="signUp",this.passwordCreate.addValidators(this.passwordStrongValidator),this.userId?.addAsyncValidators([this.userIdValidator]),this.email?.addValidators([v.required,v.email]),this.email?.addAsyncValidators([this.emailValidator]),this.userId?.updateValueAndValidity(),this.passwordCreate.updateValueAndValidity(),this.email.updateValueAndValidity(),this.emailErrUserData=null,this.signUpResult={type:"null",msg:""},this.changeDetector.detectChanges()}setLogInProcess(){this.formProcess="logIn",this.passwordCreate.removeValidators(this.passwordStrongValidator),this.userId?.removeAsyncValidators(this.userIdValidator),this.email?.removeValidators([v.required,v.email]),this.email?.clearAsyncValidators(),this.email?.updateValueAndValidity(),this.userId?.updateValueAndValidity(),this.passwordCreate.updateValueAndValidity(),this.changeDetector.detectChanges()}signUpNewUser(i){this.startProcess("Signing up"),this.subscriptions.add(this.authService.singUpUser(this.registerForm.value).subscribe(e=>{this.stopProcess(),this.signUpResult=e,i.resetForm(),this.registerForm.reset(),e.type!=="error"&&(this.snacksService.openSnack(this.msgSentEmail,"Okay","success-snackBar"),setTimeout(()=>this.signUpResult.type="null",Ze))}))}logInUser(){this.startProcess("Logging"),this.subscriptions.add(this.authService.loginUser(this.registerForm.value).pipe(P(i=>(this.stopProcess(),console.log("loging err",i),this.signUpResult={type:"error",msg:"Unable to login",userSigned:void 0},M))).subscribe(i=>{this.stopProcess(),i=i,i?.errorResponse?(this.signUpResult={type:"error",msg:i.errorResponse.message,userSigned:void 0},i.errorResponse.name==="email"?this.prepareResendEmailForm(i.errorResponse.stack):this.emailErrUserData=null):(this.signUpResult={type:"success",msg:"Ok"},this.snacksService.openSnack("You have been logged in","Okay","success-snackBar"),this.router.navigate(["quotes"]))}))}prepareResendEmailForm(i){this.emailErrUserData=JSON.parse(i),this.email?.patchValue(this.emailErrUserData?.email),this.email?.addValidators([v.required,v.email]),this.email?.clearAsyncValidators(),this.email?.addAsyncValidators(this.authValidatorService.validateEmail(this.email.value)),this.email?.markAsTouched(),this.email?.updateValueAndValidity(),this.changeDetector.detectChanges()}resendEmail(){this.startProcess("Resending email"),this.subscriptions.add(this.authService.reSendEmailConfirmation(Pe(Me({},this.emailErrUserData),{email:this.email?.value})).pipe(P(i=>(this.stopProcess(),this.signUpResult={type:"error",msg:"Unable to send email",userSigned:void 0},M))).subscribe(i=>{this.stopProcess(),i.type!=="error"&&this.snacksService.openSnack(this.msgSentEmail,"Okay","success-snackBar"),this.signUpResult={type:"success",msg:"ok",userSigned:void 0}}))}startProcess(i){this.registerForm.disable(),this.processState=i,this.signUpResult.type="null",this.signUpResult.msg=""}stopProcess(){this.registerForm.enable(),this.processState=null}showPasswordTip(){this.snacksService.openSnack(this.passwordCreate.errors.hint_strong,"Okay","success-snackBar","top",2e4)}goToSubmitButton(){this.formProcess==="signUp"&&this.email.invalid&&this.emailHTML.nativeElement.blur(),setTimeout(()=>{this.registerForm.valid&&this.buttomSubmitHTML.nativeElement.focus()},100)}goToResendButton(){this.email.invalid&&this.emailHTMLResend.nativeElement.blur(),setTimeout(()=>{this.registerForm.valid&&this.buttomResendHTML.nativeElement.focus()},100)}get userId(){return this.registerForm.get("userId")}get passwordCreate(){return this.registerForm.get("password")}get email(){return this.registerForm.get("email")}static \u0275fac=function(e){return new(e||t)(g(ne),g(Qe),g(L),g(be),g(G),g(ve),g(J))};static \u0275cmp=I({type:t,selectors:[["rt-register"]],viewQuery:function(e,r){if(e&1&&(C(_t,7,y),C(ht,5,y),C(bt,5,y),C(vt,7,y),C(wt,5,y)),e&2){let n;S(n=x())&&(r.passwordHTML=n.first),S(n=x())&&(r.emailHTML=n.first),S(n=x())&&(r.emailHTMLResend=n.first),S(n=x())&&(r.buttomSubmitHTML=n.first),S(n=x())&&(r.buttomResendHTML=n.first)}},standalone:!0,features:[je([N]),T],decls:37,vars:23,consts:[["myForm","ngForm"],["passwordHTML",""],["buttomSubmit",""],["emailHTML",""],["emailHTMLResend",""],["buttonResend",""],[1,"registerForm",3,"keydown.enter","formGroup"],[1,"registerForm__header"],[1,"registerFormregisterForm__header-title"],[3,"click","routerLink"],["class","registerForm__process-state",4,"ngIf"],[1,"custom-background"],["matInput","","type","text","formControlName","userId",3,"keyup.enter"],["mat-icon-button","","matPrefix","","color","primary"],["fontIcon","perm_identity"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","color","primary","matPrefix","",3,"click"],["matInput","","formControlName","password",3,"keyup.enter","type"],["class","resetPassword-error-strong",4,"ngIf"],["routerLink","/register/restore/","class","registerForm__link-restore",4,"ngIf"],["mat-raised-button","","type","submit",1,"common-action-button",3,"keyup.enter","click","disabled"],["class","registerResultMessage",4,"ngIf"],["class","resendEmail",4,"ngIf"],[1,"registerForm__process-state"],["mode","query"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["fontIcon","close"],[1,"resetPassword-error-strong"],["matTooltip","Password requirements",1,"icon-error-details",3,"click"],["routerLink","/register/restore/",1,"registerForm__link-restore"],["matInput","","formControlName","email",3,"keyup.enter"],[1,"registerResultMessage"],["class","registerResultMessage__text",4,"ngIf"],["class","registerResultMessage__button","mat-raised-button","",3,"click",4,"ngIf"],[1,"registerResultMessage__text"],["mat-raised-button","",1,"registerResultMessage__button",3,"click"],[1,"resendEmail"],[1,"resendEmail","registerForm",3,"formGroup"],["mat-raised-button","",1,"common-action-button",3,"click","disabled"]],template:function(e,r){if(e&1){let n=_();o(0,"form",6,0),u("keydown.enter",function(h){return d(n),p(h.preventDefault())}),o(2,"div",7)(3,"mat-label",8),l(4),a(),o(5,"a",9),u("click",function(){return d(n),p(r.formProcess==="logIn"?r.setSignUpFormProcess():r.setLogInProcess())}),l(6),a()(),f(7,Ct,4,1,"div",10),o(8,"mat-form-field",11)(9,"mat-label"),l(10,"UserName"),a(),o(11,"input",12),u("keyup.enter",function(){d(n);let h=k(26);return p(h.focus())}),a(),o(12,"button",13)(13,"mat-icon",14),l(14,"close"),a()(),f(15,St,3,0,"button",15)(16,xt,2,0,"mat-error",16)(17,Rt,2,0,"mat-error",16)(18,Et,2,0,"mat-error",16),a(),o(19,"mat-form-field")(20,"mat-label"),l(21,"Password"),a(),o(22,"button",17),u("click",function(){return d(n),p(r.hide=!r.hide)}),o(23,"mat-icon"),l(24),a()(),o(25,"input",18,1),u("keyup.enter",function(){return d(n),k(26).blur(),p(r.formProcess==="logIn"?r.goToSubmitButton():r.emailHTML.nativeElement.focus())}),a(),f(27,Mt,3,0,"button",15)(28,Pt,2,0,"mat-error",16)(29,It,4,0,"mat-error",19),a(),f(30,kt,2,0,"a",20)(31,At,9,4,"mat-form-field",16),o(32,"button",21,2),u("keyup.enter",function(){d(n);let h=k(1);return p(r.formProcess==="logIn"?r.logInUser():r.signUpNewUser(h))})("click",function(){d(n);let h=k(1);return p(r.formProcess==="logIn"?r.logInUser():r.signUpNewUser(h))}),l(34),a()(),f(35,Bt,3,2,"section",22)(36,jt,14,5,"section",23)}e&2&&(m("formGroup",r.registerForm),s(4),E("",r.formProcess==="logIn"?"Log In":"Sign Up"," Form"),s(),m("routerLink",Xe(22,yt)),s(),E("",r.formProcess==="logIn"?"Sign Up":"Log In"," "),s(),m("ngIf",r.processState),s(8),m("ngIf",r.userId==null?null:r.userId.value),s(),m("ngIf",r.userId==null||r.userId.errors==null?null:r.userId.errors.userIdTaken),s(),m("ngIf",r.userId==null||r.userId.errors==null?null:r.userId.errors.minlength),s(),m("ngIf",r.userId==null||r.userId.errors==null?null:r.userId.errors.required),s(4),V("aria-label","Hide password")("aria-pressed",r.hide),s(2),R(r.hide?"visibility_off":"visibility"),s(),m("type",r.hide?"password":"text"),s(2),m("ngIf",r.passwordCreate==null?null:r.passwordCreate.value),s(),m("ngIf",r.passwordCreate==null||r.passwordCreate.errors==null?null:r.passwordCreate.errors.required),s(),m("ngIf",r.passwordCreate==null||r.passwordCreate.errors==null?null:r.passwordCreate.errors.strong),s(),m("ngIf",r.formProcess==="logIn"),s(),m("ngIf",r.formProcess==="signUp"),s(),m("disabled",r.registerForm.invalid||r.registerForm.disabled),s(2),E(" ",r.formProcess==="logIn"?"Log In":"Sign Up"," "),s(),m("ngIf",r.signUpResult.type!=="null"),s(),m("ngIf",r.emailErrUserData))},dependencies:[fe,ge,ce,ae,se,le,me,A,O,oe,re,K,ee,te,N,ie,$e,de,ue,pe,D,B,_e,We,j,q,U],styles:[".visually-hidden[_ngcontent-%COMP%]{position:absolute!important;width:1px!important;height:1px!important;margin:-1px!important;border:0!important;padding:0!important;white-space:nowrap!important;clip-path:inset(100%)!important;clip:rect(0 0 0 0)!important;overflow:hidden!important}.registerForm[_ngcontent-%COMP%]{margin-top:10vh;display:grid;align-items:center;justify-content:center;margin-left:2vw;gap:3vh;width:100%}@media (max-width: 767px){.registerForm[_ngcontent-%COMP%]{margin-left:0;margin-top:2vh}}.registerForm__header[_ngcontent-%COMP%]{font-size:large;display:flex;justify-content:space-between}.registerForm[_ngcontent-%COMP%]   .resetPassword-error-strong[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:2%}.registerForm[_ngcontent-%COMP%]   .resetPassword-error-strong[_ngcontent-%COMP%]   .icon-error-details[_ngcontent-%COMP%]{transform:scale(1.8);margin-left:1vw;cursor:pointer}.registerForm__link-restore[_ngcontent-%COMP%]{width:fit-content;padding-left:2%}.registerResultMessage[_ngcontent-%COMP%]{margin-top:2vh;margin-left:2vw;width:95vw;justify-items:center;display:grid;align-items:center;gap:1vw}@media (max-width: 767px){.registerResultMessage[_ngcontent-%COMP%]{flex-direction:column}}.registerResultMessage__text[_ngcontent-%COMP%]{font-weight:700;font-size:medium;text-align:center;vertical-align:middle;color:var(--color-text-error)}@media (max-width: 767px){.registerResultMessage__text[_ngcontent-%COMP%]{text-align:center;font-weight:500}}.registerResultMessage__button[_ngcontent-%COMP%]{width:15vw}@media (max-width: 767px){.registerResultMessage__button[_ngcontent-%COMP%]{width:40vw}}.resendEmail[_ngcontent-%COMP%]   .resendEmail.registerForm[_ngcontent-%COMP%]{margin-top:1vh}.mat-mdc-form-field[_ngcontent-%COMP%]{border-width:1px;border-radius:2%/15%;width:30vw;padding:2%}@media (max-width: 767px){.mat-mdc-form-field[_ngcontent-%COMP%]{width:86vw}}"]})};function Xt(t,i){if(t&1&&(o(0,"div",4)(1,"label"),l(2),a(),w(3,"mat-progress-bar",5),a()),t&2){let e=c();s(2),R(e.processState)}}function Gt(t,i){if(t&1&&(o(0,"label",6),l(1),a()),t&2){let e=c();qe("ngClass",e.result),s(),E(" ",e.result==="success"?"Success: Your email address has been confirmed!":"Error: Email has not been confirmed!",`
`)}}var ye=class t{constructor(i,e){this.route=i;this.userMongoServiceService=e}result="null";processState=null;subscripitons=new F;ngOnInit(){this.processState="Email confirmation..",this.subscripitons.add(this.userMongoServiceService.confirmEmail(this.route.snapshot.params).pipe(P(i=>(this.processState=null,M))).subscribe(i=>{this.processState=null,this.result=i?"success":"error"}))}ngOnDestroy(){this.subscripitons.unsubscribe()}static \u0275fac=function(e){return new(e||t)(g(L),g(he))};static \u0275cmp=I({type:t,selectors:[["app-email-confirm"]],standalone:!0,features:[T],decls:7,vars:2,consts:[["class","process-state",4,"ngIf"],[1,"registerResultMessage"],["class","registerResultMessage__text",3,"ngClass",4,"ngIf"],["mat-raised-button","","routerLink","/register",1,"common-action-button"],[1,"process-state"],["mode","query"],[1,"registerResultMessage__text",3,"ngClass"]],template:function(e,r){e&1&&(f(0,Xt,4,1,"div",0),o(1,"div",1),f(2,Gt,2,2,"label",2),w(3,"br")(4,"br"),o(5,"button",3),l(6,"Back to Log In page"),a()()),e&2&&(m("ngIf",r.processState),s(2),m("ngIf",r.result!=="null"))},dependencies:[D,B,A,Ge,O,j,q,U],styles:[".visually-hidden[_ngcontent-%COMP%]{position:absolute!important;width:1px!important;height:1px!important;margin:-1px!important;border:0!important;padding:0!important;white-space:nowrap!important;clip-path:inset(100%)!important;clip:rect(0 0 0 0)!important;overflow:hidden!important}.process-state[_ngcontent-%COMP%]{margin-left:1vw;margin-right:1vw}@media (max-width: 767px){.process-state[_ngcontent-%COMP%]{margin-top:70vh}}.common-action-button[_ngcontent-%COMP%]{min-height:4vh!important}.registerResultMessage[_ngcontent-%COMP%]{margin-left:2vw}@media (max-width: 767px){.registerResultMessage[_ngcontent-%COMP%]{margin-top:70vh!important}}.registerResultMessage__text[_ngcontent-%COMP%]{margin-top:2vh;font-weight:700;font-size:medium;color:var(--color-text-success)}@media (max-width: 767px){.registerResultMessage__text[_ngcontent-%COMP%]{font-weight:500}}.registerResultMessage__text.error[_ngcontent-%COMP%]{margin-left:2vw;color:var(--color-text-error)}"]})};var zt=["submitButtonHTML"],Qt=["submitButtonSaveNewPasswordHTML"],$t=["passwordConfirmHTML"];function Yt(t,i){if(t&1&&(o(0,"div",12)(1,"label"),l(2),a(),w(3,"mat-progress-bar",13),a()),t&2){let e=c();s(2),R(e.processState)}}function Wt(t,i){if(t&1){let e=_();o(0,"button",17),u("click",function(){d(e);let n=c(2);return p(n.email==null?null:n.email.patchValue(null))}),o(1,"mat-icon"),l(2,"close"),a()()}}function Zt(t,i){t&1&&(o(0,"mat-error"),l(1," The field is required "),a())}function Jt(t,i){t&1&&(o(0,"mat-error"),l(1," Incorrect email "),a())}function Kt(t,i){t&1&&(o(0,"mat-error"),l(1," This email has not been found "),a())}function er(t,i){if(t&1){let e=_();o(0,"mat-form-field",14)(1,"mat-label"),l(2,"Email to send a reset link"),a(),o(3,"input",15,0),u("keyup.enter",function(){d(e);let n=k(4);return p(n.blur())}),a(),f(5,Wt,3,0,"button",16)(6,Zt,2,0,"mat-error",8)(7,Jt,2,0,"mat-error",8)(8,Kt,2,0,"mat-error",8),a()}if(t&2){let e=c();s(3),m("type","email"),s(2),m("ngIf",e.emailForRestore==null?null:e.emailForRestore.value),s(),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.required),s(),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.email),s(),m("ngIf",e.email==null||e.email.errors==null?null:e.email.errors.emailNotExists)}}function tr(t,i){if(t&1){let e=_();o(0,"button",17),u("click",function(){d(e);let n=c(2);return p(n.passwordCreate.patchValue(null))}),o(1,"mat-icon"),l(2,"close"),a()()}}function rr(t,i){t&1&&(o(0,"mat-error"),l(1," The field is required "),a())}function ir(t,i){if(t&1){let e=_();o(0,"mat-error",21),l(1," Not safe. Check requirements "),o(2,"mat-icon",22),u("click",function(){d(e);let n=c(2);return p(n.showPasswordTip())}),l(3,"more"),a()()}}function nr(t,i){if(t&1){let e=_();o(0,"mat-form-field")(1,"mat-label"),l(2,"Password"),a(),o(3,"button",18),u("click",function(){d(e);let n=c();return p(n.hide=!n.hide)}),o(4,"mat-icon"),l(5),a()(),o(6,"input",19),u("keyup.enter",function(){d(e);let n=c();return p(n.passwordConfirmHTML.nativeElement.focus())}),a(),f(7,tr,3,0,"button",16)(8,rr,2,0,"mat-error",8)(9,ir,4,0,"mat-error",20),a()}if(t&2){let e=c();s(3),V("aria-label","Hide password")("aria-pressed",e.hide),s(2),R(e.hide?"visibility_off":"visibility"),s(),m("type",e.hide?"password":"text"),s(),m("ngIf",e.passwordCreate==null?null:e.passwordCreate.value),s(),m("ngIf",e.passwordCreate==null||e.passwordCreate.errors==null?null:e.passwordCreate.errors.required),s(),m("ngIf",e.passwordCreate==null||e.passwordCreate.errors==null?null:e.passwordCreate.errors.strong)}}function or(t,i){if(t&1){let e=_();o(0,"button",17),u("click",function(){d(e);let n=c(2);return p(n.passwordConfirm.patchValue(null))}),o(1,"mat-icon"),l(2,"close"),a()()}}function ar(t,i){t&1&&(o(0,"mat-error"),l(1," The field is required "),a())}function sr(t,i){t&1&&(o(0,"mat-error"),l(1," Passwords do not match "),a())}function lr(t,i){if(t&1){let e=_();o(0,"mat-form-field")(1,"mat-label"),l(2,"Confirm Password"),a(),o(3,"button",18),u("click",function(){d(e);let n=c();return p(n.hide=!n.hide)}),o(4,"mat-icon"),l(5),a()(),o(6,"input",23,1),u("keyup.enter",function(){d(e);let n=k(7);return p(n.blur())}),a(),f(8,or,3,0,"button",16)(9,ar,2,0,"mat-error",8)(10,sr,2,0,"mat-error",8),a()}if(t&2){let e=c();s(3),V("aria-label","Hide password")("aria-pressed",e.hide),s(2),R(e.hide?"visibility_off":"visibility"),s(),m("type",e.hide?"password":"text"),s(2),m("ngIf",e.passwordConfirm==null?null:e.passwordConfirm.value),s(),m("ngIf",e.passwordConfirm==null||e.passwordConfirm.errors==null?null:e.passwordConfirm.errors.required),s(),m("ngIf",e.passwordConfirm==null||e.passwordConfirm.errors==null?null:e.passwordConfirm.errors.passowrdDifference)}}function mr(t,i){if(t&1&&(o(0,"mat-label"),l(1),W(2,"async"),a()),t&2){let e=c();s(),E("Next link could be sent in ",Z(2,1,e.authService.timer$),"")}}function cr(t,i){if(t&1){let e=_();o(0,"button",24,2),W(2,"async"),u("click",function(){d(e);let n=c();return p(n.resetPasswordPrepare())})("keyup.enter",function(){d(e);let n=c();return p(n.resetPasswordPrepare())}),l(3," Reset Password "),a()}if(t&2){let e=c();m("disabled",e.emailForRestore.invalid||Z(2,1,e.authService.timer$)!=0)}}function dr(t,i){if(t&1){let e=_();o(0,"button",24,3),u("click",function(){d(e);let n=c();return p(n.resetPasswordExecute())})("keyup.enter",function(){d(e);let n=c();return p(n.resetPasswordExecute())}),l(2," Save New Password "),a()}if(t&2){let e=c();m("disabled",e.emailForRestore.invalid)}}var $=class t{constructor(i,e,r,n,b){this.fb=i;this.authValidatorService=e;this.authService=r;this.snacksService=n;this.route=b;this.emailForRestore=this.fb.group({email:["",{validators:[v.required,v.email],asyncValidators:[this.authValidatorService.validateEmailExist()],updateOn:"blur"}],passwordCreate:["",{validators:[],updateOn:"blur"}],passwordConfirm:["",{validators:[],updateOn:"blur"}]}),this.passwordCreateValidators=[v.required,e.strongPasswordValidation(H.PASSWORD_SETTINGS.MINLENGTH,H.PASSWORD_SETTINGS.REQUIREMENTS)],this.passwordConfirmValidators=[v.required,this.comparePasswordValidator()]}submitButtonHTML;submitNewPasswordHTML;passwordConfirmHTML;emailForRestore;processState=null;msgSentEmail=`Email has been sent to reset your password.
 Please create a new password by using a link in the message sent to you`;formProcess="SendEmail";hide=!1;subscriptions=new F;userDataPasswordReset={id:"",token:""};passwordCreateValidators;passwordConfirmValidators;ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.subscriptions.add(this.passwordCreate?.valueChanges.pipe(Se(()=>this.passwordConfirm?.updateValueAndValidity())).subscribe()),this.subscriptions.add(this.emailForRestore.statusChanges.pipe(z(i=>i==="VALID")).subscribe(()=>setTimeout(()=>{this.formProcess==="SendEmail"?this.submitButtonHTML.nativeElement.focus():this.submitNewPasswordHTML.nativeElement.focus()},100))),this.formInit()}formInit(){this.subscriptions.add(this.route.params.pipe(Se(i=>i?.id?null:this.authService.checkTimer()),z(i=>i?.id)).subscribe(i=>{this.formProcess="ResetPassword",this.userDataPasswordReset=i,this.email?.clearAsyncValidators(),this.email?.clearValidators(),this.passwordCreate.addValidators(this.passwordCreateValidators),this.passwordConfirm.addValidators(this.passwordConfirmValidators)}))}resetPasswordExecute(){this.processState="Saving new password",this.emailForRestore.disable(),this.authService.resetPasswordExecute(this.userDataPasswordReset?.id,this.userDataPasswordReset?.token,this.passwordCreate?.value).pipe(P(()=>(this.emailForRestore.enable(),this.processState=null,M))).subscribe(i=>{this.snacksService.openSnack(i?"Password has been changed":"Error. User or token has not been found","Okay",i?"success-snackBar":"error-snackBar"),this.processState=null,this.emailForRestore.enable()})}resetPasswordPrepare(){this.processState="Sending reseting email",this.emailForRestore.disable(),this.authService.resetPasswordEmail(this.email?.getRawValue()).pipe(P(i=>(this.processState=null,this.emailForRestore.enable(),M))).subscribe(i=>{this.processState=null,this.emailForRestore.enable(),this.snacksService.openSnack(this.msgSentEmail,"Okay","success-snackBar"),this.authService.setTimerForResend(Je)})}comparePasswordValidator(){return i=>this.passwordConfirm?.value===this.passwordCreate?.value?null:{passowrdDifference:!0}}showPasswordTip(){this.snacksService.openSnack(this.passwordCreate.errors.hint_strong,"Okay","success-snackBar","top",2e4)}get email(){return this.emailForRestore.get("email")}get passwordCreate(){return this.emailForRestore?.get("passwordCreate")}get passwordConfirm(){return this.emailForRestore?.get("passwordConfirm")}static \u0275fac=function(e){return new(e||t)(g(ne),g(G),g(be),g(ve),g(L))};static \u0275cmp=I({type:t,selectors:[["app-password-restore"]],viewQuery:function(e,r){if(e&1&&(C(zt,5,y),C(Qt,5,y),C($t,5,y)),e&2){let n;S(n=x())&&(r.submitButtonHTML=n.first),S(n=x())&&(r.submitNewPasswordHTML=n.first),S(n=x())&&(r.passwordConfirmHTML=n.first)}},standalone:!0,features:[T],decls:14,vars:11,consts:[["emailHTML",""],["passwordConfirmHTML",""],["submitButtonHTML",""],["submitButtonSaveNewPasswordHTML",""],["class","process-state",4,"ngIf"],[1,"registerForm",3,"keydown.enter","formGroup"],[1,"header"],["class","email_address",4,"ngIf"],[4,"ngIf"],[1,"button-block"],["mat-raised-button","","class","common-action-button",3,"disabled","click","keyup.enter",4,"ngIf"],["mat-raised-button","","type","button","routerLink","/register",1,"common-action-button"],[1,"process-state"],["mode","query"],[1,"email_address"],["matInput","","formControlName","email",3,"keyup.enter","type"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-icon-button","","color","primary","matPrefix","",3,"click"],["matInput","","formControlName","passwordCreate",3,"keyup.enter","type"],["class","resetPassword-error-strong",4,"ngIf"],[1,"resetPassword-error-strong"],["matTooltip","Password requirements",1,"icon-error-details",3,"click"],["matInput","","formControlName","passwordConfirm",3,"keyup.enter","type"],["mat-raised-button","",1,"common-action-button",3,"click","keyup.enter","disabled"]],template:function(e,r){e&1&&(f(0,Yt,4,1,"div",4),o(1,"form",5),u("keydown.enter",function(b){return b.preventDefault()}),o(2,"mat-label",6),l(3),a(),f(4,er,9,5,"mat-form-field",7)(5,nr,10,7,"mat-form-field",8)(6,lr,11,7,"mat-form-field",8)(7,mr,3,3,"mat-label",8),W(8,"async"),o(9,"div",9),f(10,cr,4,3,"button",10)(11,dr,3,1,"button",10),o(12,"button",11),l(13,"Back to Log In"),a()()()),e&2&&(m("ngIf",r.processState),s(),m("formGroup",r.emailForRestore),s(2),R(r.formProcess==="SendEmail"?"Reset password":"Create new password"),s(),m("ngIf",r.formProcess==="SendEmail"),s(),m("ngIf",r.formProcess==="ResetPassword"),s(),m("ngIf",r.formProcess==="ResetPassword"),s(),m("ngIf",Z(8,9,r.authService.timer$)!=0),s(3),m("ngIf",r.formProcess==="SendEmail"),s(),m("ngIf",r.formProcess==="ResetPassword"))},dependencies:[U,D,B,_e,de,ce,ae,se,le,me,fe,ge,ue,pe,A,O,ze,oe,re,K,ee,te,N,ie,j,q,et,Ke],styles:[".visually-hidden[_ngcontent-%COMP%]{position:absolute!important;width:1px!important;height:1px!important;margin:-1px!important;border:0!important;padding:0!important;white-space:nowrap!important;clip-path:inset(100%)!important;clip:rect(0 0 0 0)!important;overflow:hidden!important}.process-state[_ngcontent-%COMP%]{margin-left:1vw;margin-right:1vw}form[_ngcontent-%COMP%]{margin-top:10vh;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-left:2vw;gap:3vh;width:98vw;min-width:50vw}form[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{text-align:center;font-size:x-large;font-weight:500}form[_ngcontent-%COMP%]   .resetPassword-error-strong[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:2%}form[_ngcontent-%COMP%]   .resetPassword-error-strong[_ngcontent-%COMP%]   .icon-error-details[_ngcontent-%COMP%]{transform:scale(1.8);margin-left:1vw;cursor:pointer}form[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]{align-items:center;justify-content:space-between;display:flex;width:inherit;max-width:440px}@media (max-width: 767px){form[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]{justify-content:space-evenly;margin-left:-5vw}}.common-action-button[_ngcontent-%COMP%]{min-height:4vh!important}@media (max-width: 767px){.common-action-button[_ngcontent-%COMP%]{min-height:8vh!important;font-size:small!important}}.mat-mdc-form-field[_ngcontent-%COMP%]{padding:1%!important;max-width:400px}@media (max-width: 767px){.mat-mdc-form-field[_ngcontent-%COMP%]{width:86vw}}"]})};var Oi=[{path:"",component:Q},{path:"logout/:logout",component:Q},{path:"restore",component:$},{path:"restore/:id/:token",component:$},{path:"confirm-email/:id/:token",component:ye}];export{Oi as registerRoutes};
